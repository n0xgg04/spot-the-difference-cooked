<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.ltm.game.client.controllers.LobbyController">
    
    <!-- Background Image -->
    <ImageView fitWidth="1920" fitHeight="1080" preserveRatio="false" pickOnBounds="false">
        <image>
            <Image url="@../images/v2/forest-8227410.jpg"/>
        </image>
    </ImageView>
    
    <!-- Dark Overlay -->
    <Pane style="-fx-background-color: linear-gradient(to bottom, rgba(0,10,20,0.7), rgba(0,15,30,0.85));" pickOnBounds="false"/>
    
    <!-- Main Content -->
    <BorderPane fx:id="rootPane" pickOnBounds="false">
        
        <!-- TOP BAR: Minimal header like LoL -->
        <top>
            <HBox alignment="CENTER" spacing="0" 
                  style="-fx-background-color: rgba(1, 10, 19, 0.95); 
                         -fx-border-color: rgba(200, 170, 110, 0.3);
                         -fx-border-width: 0 0 2 0;">
                <padding>
                    <Insets top="12" right="25" bottom="12" left="25"/>
                </padding>
                
                <!-- Left: Logo/Title Area -->
                <HBox spacing="15" alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                    <Label text="SPOT THE DIFFERENCE"
                           style="-fx-font-size: 22px; 
                                  -fx-font-weight: bold; 
                                  -fx-text-fill: linear-gradient(to right, #C8AA6E, #F0E6D2); 
                                  -fx-effect: dropshadow(gaussian, rgba(200,170,110,0.6), 5, 0.7, 0, 0);"/>
                </HBox>
                
                <!-- Center: User Profile -->
                <HBox spacing="12" alignment="CENTER">
                    <StackPane style="-fx-background-color: linear-gradient(to bottom right, #C8AA6E, #78614A); 
                                      -fx-background-radius: 5px; 
                                      -fx-min-width: 40px; -fx-min-height: 40px; 
                                      -fx-max-width: 40px; -fx-max-height: 40px;
                                      -fx-effect: dropshadow(gaussian, rgba(200,170,110,0.5), 8, 0.6, 0, 0);">
                        <Label text="ðŸ‘¤" style="-fx-font-size: 20px;"/>
                    </StackPane>
                    
                    <VBox spacing="2" alignment="CENTER_LEFT">
                        <Label fx:id="headerUserInfo"
                               text="Summoner Name"
                               style="-fx-font-size: 14px; 
                                      -fx-font-weight: bold; 
                                      -fx-text-fill: #F0E6D2;"/>
                        <Label text="Level 30 â€¢ Online"
                               style="-fx-font-size: 11px; 
                                      -fx-text-fill: #A09B8C;"/>
                    </VBox>
                </HBox>
                
                <!-- Right: Controls -->
                <HBox spacing="10" alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                    <Button fx:id="muteButton"
                            text="ðŸ”Š"
                            onAction="#handleToggleMute"
                            style="-fx-font-size: 16px; 
                                   -fx-padding: 8px 12px; 
                                   -fx-background-color: rgba(30, 35, 40, 0.8); 
                                   -fx-text-fill: #C8AA6E; 
                                   -fx-background-radius: 5px; 
                                   -fx-border-color: rgba(200, 170, 110, 0.3);
                                   -fx-border-radius: 5px;
                                   -fx-border-width: 1px;
                                   -fx-cursor: hand;"/>
                    
                    <Button text="THOÃT"
                            onAction="#handleLogout"
                            style="-fx-font-size: 12px; 
                                   -fx-padding: 10px 20px; 
                                   -fx-background-color: rgba(30, 35, 40, 0.8); 
                                   -fx-text-fill: #C8AA6E; 
                                   -fx-background-radius: 5px; 
                                   -fx-border-color: rgba(200, 170, 110, 0.3);
                                   -fx-border-radius: 5px;
                                   -fx-border-width: 1px;
                                   -fx-cursor: hand; 
                                   -fx-font-weight: bold;"/>
                </HBox>
            </HBox>
        </top>
        
        <!-- CENTER: Main Lobby Area -->
        <center>
            <BorderPane>
                <BorderPane.margin>
                    <Insets top="0" right="0" bottom="0" left="0"/>
                </BorderPane.margin>
                
                <!-- LEFT SIDEBAR: Player Profile Card -->
                <left>
                    <VBox spacing="20" prefWidth="340" maxWidth="340"
                          style="-fx-background-color: rgba(1, 10, 19, 0.85); 
                                 -fx-border-color: rgba(200, 170, 110, 0.2);
                                 -fx-border-width: 0 1 0 0;">
                        <padding>
                            <Insets top="30" right="20" bottom="30" left="20"/>
                        </padding>
                        
                        <!-- Profile Hero Card -->
                        <VBox spacing="15" alignment="TOP_CENTER"
                              style="-fx-background-color: linear-gradient(to bottom, rgba(200, 170, 110, 0.15), rgba(1, 10, 19, 0.5)); 
                                     -fx-background-radius: 8px;
                                     -fx-border-color: rgba(200, 170, 110, 0.4);
                                     -fx-border-radius: 8px;
                                     -fx-border-width: 1px;
                                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.6), 15, 0.5, 0, 3);">
                            <padding>
                                <Insets top="25" right="20" bottom="25" left="20"/>
                            </padding>
                            
                            <!-- Large Avatar -->
                            <StackPane style="-fx-background-color: linear-gradient(to bottom right, #C8AA6E, #78614A); 
                                              -fx-background-radius: 8px; 
                                              -fx-min-width: 120px; -fx-min-height: 120px; 
                                              -fx-max-width: 120px; -fx-max-height: 120px;
                                              -fx-effect: dropshadow(gaussian, rgba(200,170,110,0.7), 12, 0.7, 0, 0);">
                                <Label text="ðŸ‘¤" style="-fx-font-size: 60px;"/>
                            </StackPane>
                            
                            <!-- Player Stats -->
                            <VBox spacing="8" alignment="CENTER">
                                <Label text="SUMMONER STATS"
                                       style="-fx-font-size: 11px; 
                                              -fx-font-weight: bold; 
                                              -fx-text-fill: #785A28;
                                              -fx-letter-spacing: 1px;"/>
                                
                                <HBox spacing="20" alignment="CENTER">
                                    <VBox spacing="3" alignment="CENTER">
                                        <Label fx:id="statsWinsLabel" text="0"
                                               style="-fx-font-size: 24px; 
                                                      -fx-font-weight: bold; 
                                                      -fx-text-fill: #C8AA6E;"/>
                                        <Label text="Tháº¯ng"
                                               style="-fx-font-size: 11px; 
                                                      -fx-text-fill: #A09B8C;"/>
                                    </VBox>
                                    
                                    <Separator orientation="VERTICAL" prefHeight="40"
                                               style="-fx-background-color: rgba(200, 170, 110, 0.3);"/>
                                    
                                    <VBox spacing="3" alignment="CENTER">
                                        <Label fx:id="statsPointsLabel" text="0"
                                               style="-fx-font-size: 24px; 
                                                      -fx-font-weight: bold; 
                                                      -fx-text-fill: #C8AA6E;"/>
                                        <Label text="Äiá»ƒm"
                                               style="-fx-font-size: 11px; 
                                                      -fx-text-fill: #A09B8C;"/>
                                    </VBox>
                                </HBox>
                            </VBox>
                        </VBox>
                        
                        <!-- Ranked Info -->
                        <VBox spacing="10"
                              style="-fx-background-color: rgba(200, 170, 110, 0.08); 
                                     -fx-background-radius: 8px;
                                     -fx-border-color: rgba(200, 170, 110, 0.2);
                                     -fx-border-radius: 8px;
                                     -fx-border-width: 1px;">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>
                            
                            <Label text="Xáº¾P Háº NG"
                                   style="-fx-font-size: 11px; 
                                          -fx-font-weight: bold; 
                                          -fx-text-fill: #785A28;
                                          -fx-letter-spacing: 1px;"/>
                            
                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <Label fx:id="rankIconLabel" text="ðŸ¥‡"
                                       style="-fx-font-size: 28px;"/>
                                <VBox spacing="2">
                                    <Label fx:id="rankPositionLabel" text="#--"
                                           style="-fx-font-size: 18px; 
                                                  -fx-font-weight: bold; 
                                                  -fx-text-fill: #C8AA6E;"/>
                                    <Label fx:id="rankDescriptionLabel" text="Vá»‹ trÃ­ trÃªn báº£ng"
                                           style="-fx-font-size: 11px; 
                                                  -fx-text-fill: #A09B8C;"/>
                                </VBox>
                            </HBox>
                        </VBox>
                    </VBox>
                </left>
                
                <!-- CENTER: Play Button & Status -->
                <center>
                    <StackPane>
                        <!-- Giant PLAY Button -->
                        <VBox spacing="30" alignment="CENTER">
                            <VBox.margin>
                                <Insets bottom="100"/>
                            </VBox.margin>
                            
                            <!-- MEGA Play Button -->
                            <VBox spacing="0" alignment="CENTER" onMouseClicked="#handleFindMatch"
                                  style="-fx-background-color: linear-gradient(to bottom, #C89B3C, #785A28); 
                                         -fx-background-radius: 10px; 
                                         -fx-padding: 35px 80px;
                                         -fx-cursor: hand;
                                         -fx-border-color: #F0E6D2;
                                         -fx-border-radius: 10px;
                                         -fx-border-width: 2px;
                                         -fx-effect: dropshadow(gaussian, rgba(200, 170, 110, 0.8), 25, 0.8, 0, 8);">
                                <Label text="TÃŒM TRáº¬N"
                                       style="-fx-font-size: 42px; 
                                              -fx-font-weight: 900; 
                                              -fx-text-fill: #F0E6D2;
                                              -fx-letter-spacing: 3px;
                                              -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.7), 3, 1, 0, 2);"/>
                            </VBox>
                            
                            <!-- Queue Info -->
                            <HBox spacing="15" alignment="CENTER">
                                <Label text="âš”ï¸"
                                       style="-fx-font-size: 20px;"/>
                                <VBox spacing="2">
                                    <Label text="CLASSIC MODE"
                                           style="-fx-font-size: 14px; 
                                                  -fx-font-weight: bold; 
                                                  -fx-text-fill: #C8AA6E;"/>
                                    <Label text="1v1 â€¢ Ranked"
                                           style="-fx-font-size: 11px; 
                                                  -fx-text-fill: #A09B8C;"/>
                                </VBox>
                            </HBox>
                        </VBox>
                    </StackPane>
                </center>
                
                <!-- RIGHT SIDEBAR: Player List & Leaderboard -->
                <right>
                    <VBox spacing="0" prefWidth="440" maxWidth="440"
                          style="-fx-background-color: rgba(1, 10, 19, 0.85); 
                                 -fx-border-color: rgba(200, 170, 110, 0.2);
                                 -fx-border-width: 0 0 0 1;">
                        
                        <!-- Online Players Section -->
                        <VBox spacing="12" VBox.vgrow="ALWAYS"
                              style="-fx-border-color: rgba(200, 170, 110, 0.2);
                                     -fx-border-width: 0 0 1 0;">
                            <padding>
                                <Insets top="25" right="20" bottom="25" left="20"/>
                            </padding>
                            
                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Label text="NGÆ¯á»œI CHÆ I ONLINE"
                                       style="-fx-font-size: 13px; 
                                              -fx-font-weight: bold; 
                                              -fx-text-fill: #C8AA6E;
                                              -fx-letter-spacing: 1px;"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <CheckBox fx:id="autoRefresh"
                                          text="Auto"
                                          selected="true"
                                          style="-fx-text-fill: #A09B8C; 
                                                 -fx-font-size: 11px;"/>
                            </HBox>
                            
                            <TextField fx:id="searchField"
                                       promptText="TÃ¬m kiáº¿m..."
                                       style="-fx-font-size: 12px; 
                                              -fx-padding: 10px 15px; 
                                              -fx-background-color: rgba(1, 10, 19, 0.8); 
                                              -fx-background-radius: 5px; 
                                              -fx-text-fill: #F0E6D2;
                                              -fx-prompt-text-fill: #5B5A56;
                                              -fx-border-color: rgba(200, 170, 110, 0.3); 
                                              -fx-border-radius: 5px; 
                                              -fx-border-width: 1px;"/>
                            
                            <TableView fx:id="lobbyTable"
                                       VBox.vgrow="ALWAYS"
                                       style="-fx-background-color: transparent; 
                                              -fx-background-insets: 0;">
                                <placeholder>
                                    <Label text="KhÃ´ng cÃ³ ngÆ°á»i chÆ¡i nÃ o"
                                           style="-fx-text-fill: #5B5A56;"/>
                                </placeholder>
                                <columns>
                                    <TableColumn fx:id="colUser" text="NgÆ°á»i chÆ¡i" prefWidth="140" minWidth="140" resizable="false"/>
                                    <TableColumn fx:id="colPoints" text="Äiá»ƒm" prefWidth="80" minWidth="80" resizable="false"/>
                                    <TableColumn fx:id="colStatus" text="Tráº¡ng thÃ¡i" prefWidth="90" minWidth="90" resizable="false"/>
                                    <TableColumn fx:id="colAction" text="HÃ nh Ä‘á»™ng" prefWidth="90" minWidth="90" resizable="false"/>
                                </columns>
                            </TableView>
                        </VBox>
                        
                        <!-- Leaderboard Section -->
                        <VBox spacing="12" VBox.vgrow="ALWAYS">
                            <padding>
                                <Insets top="25" right="20" bottom="25" left="20"/>
                            </padding>
                            
                            <Label text="Báº¢NG Xáº¾P Háº NG"
                                   style="-fx-font-size: 13px; 
                                          -fx-font-weight: bold; 
                                          -fx-text-fill: #C8AA6E;
                                          -fx-letter-spacing: 1px;"/>
                            
                            <TableView fx:id="leaderboardTable"
                                       VBox.vgrow="ALWAYS"
                                       style="-fx-background-color: transparent; 
                                              -fx-background-insets: 0;">
                                <placeholder>
                                    <Label text="Äang táº£i..."
                                           style="-fx-text-fill: #5B5A56;"/>
                                </placeholder>
                                <columns>
                                    <TableColumn fx:id="colRank" text="Háº¡ng" prefWidth="60" minWidth="60" resizable="false"/>
                                    <TableColumn fx:id="colPlayer" text="NgÆ°á»i chÆ¡i" prefWidth="180" minWidth="180" resizable="false"/>
                                    <TableColumn fx:id="colScore" text="Äiá»ƒm" prefWidth="80" minWidth="80" resizable="false"/>
                                    <TableColumn fx:id="colWins" text="Tháº¯ng" prefWidth="80" minWidth="80" resizable="false"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </VBox>
                </right>
            </BorderPane>
        </center>
        
    </BorderPane>
    
</StackPane>
